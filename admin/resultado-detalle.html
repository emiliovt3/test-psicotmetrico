<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Resultado Detallado - Sistema de Evaluación Psicométrica</title>
    <!-- CSS Files -->
    <link href="../Tabler/tabler-1.4.0/dashboard/dist/css/tabler.min.css" rel="stylesheet" />
    <link href="../Tabler/tabler-1.4.0/dashboard/dist/css/tabler-flags.min.css" rel="stylesheet" />
    <link href="../Tabler/tabler-1.4.0/dashboard/dist/css/tabler-payments.min.css" rel="stylesheet" />
    <link href="../Tabler/tabler-1.4.0/dashboard/dist/css/tabler-vendors.min.css" rel="stylesheet" />
    <style>
      @import url("https://rsms.me/inter/inter.css");
      :root {
        --tblr-font-sans-serif: 'Inter Var', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif;
      }
      body {
        font-feature-settings: "cv03", "cv04", "cv11";
      }
      .score-circle {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
        position: relative;
        background: conic-gradient(
          from 0deg,
          #e5e7eb 0deg,
          #e5e7eb 360deg
        );
      }
      .score-circle-inner {
        width: 160px;
        height: 160px;
        background: white;
        border-radius: 50%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      [data-bs-theme="dark"] .score-circle-inner {
        background: var(--tblr-bg-surface);
      }
      .score-value {
        font-size: 3rem;
        font-weight: bold;
        line-height: 1;
      }
      .score-max {
        font-size: 1rem;
        color: #6c757d;
      }
      .disc-chart {
        display: flex;
        justify-content: space-around;
        align-items: flex-end;
        height: 200px;
        padding: 20px 0;
      }
      .disc-bar {
        width: 60px;
        background: linear-gradient(to top, #206bc4, #79a6dc);
        border-radius: 4px 4px 0 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-end;
        color: white;
        font-weight: bold;
        padding-bottom: 10px;
        position: relative;
      }
      .disc-bar-d { background: linear-gradient(to top, #dc2626, #ef4444); }
      .disc-bar-i { background: linear-gradient(to top, #f59e0b, #fbbf24); }
      .disc-bar-s { background: linear-gradient(to top, #2563eb, #3b82f6); }
      .disc-bar-c { background: linear-gradient(to top, #059669, #10b981); }
      .disc-label {
        position: absolute;
        bottom: -25px;
        font-size: 1.2rem;
        color: var(--tblr-body-color);
      }
      .red-flag {
        background: #fee2e2;
        border-left: 4px solid #dc2626;
        padding: 1rem;
        margin: 0.5rem 0;
      }
      [data-bs-theme="dark"] .red-flag {
        background: rgba(220, 38, 38, 0.1);
        border-left-color: #dc2626;
      }
      .recommendation-box {
        padding: 2rem;
        border-radius: 8px;
        text-align: center;
      }
      .recommendation-hire {
        background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
        border: 2px solid #10b981;
        color: #065f46;
      }
      [data-bs-theme="dark"] .recommendation-hire {
        background: linear-gradient(135deg, rgba(5, 95, 70, 0.2) 0%, rgba(6, 78, 59, 0.3) 100%);
        border: 2px solid #10b981;
        color: #ffffff;
      }
      .recommendation-review {
        background: linear-gradient(135deg, #fed7aa 0%, #fbbf24 100%);
        border: 2px solid #f59e0b;
        color: #92400e;
      }
      [data-bs-theme="dark"] .recommendation-review {
        background: linear-gradient(135deg, rgba(146, 64, 14, 0.2) 0%, rgba(120, 53, 15, 0.3) 100%);
        border: 2px solid #f59e0b;
        color: #ffffff;
      }
      .recommendation-reject {
        background: linear-gradient(135deg, #fee2e2 0%, #fca5a5 100%);
        border: 2px solid #dc2626;
        color: #991b1b;
      }
      [data-bs-theme="dark"] .recommendation-reject {
        background: linear-gradient(135deg, rgba(153, 27, 27, 0.2) 0%, rgba(127, 29, 29, 0.3) 100%);
        border: 2px solid #dc2626;
        color: #ffffff;
      }
      @media print {
        .no-print {
          display: none !important;
        }
      }
    </style>
    <script>
      // Theme detection and initialization
      (function() {
        const theme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-bs-theme', theme);
      })();
    </script>
  </head>
  <body>
    <script src="../Tabler/tabler-1.4.0/dashboard/dist/js/demo-theme.min.js"></script>
    <script>
      // Theme switcher
      document.addEventListener('DOMContentLoaded', function() {
        const currentTheme = localStorage.getItem('theme') || 'light';
        document.body.setAttribute('data-bs-theme', currentTheme);
        
        // Update theme dropdown
        document.querySelectorAll('[data-bs-theme-value]').forEach(item => {
          item.addEventListener('click', function(e) {
            e.preventDefault();
            const newTheme = this.getAttribute('data-bs-theme-value');
            localStorage.setItem('theme', newTheme);
            document.documentElement.setAttribute('data-bs-theme', newTheme);
            document.body.setAttribute('data-bs-theme', newTheme);
          });
        });
      });
    </script>
    <div class="page">
      <!-- Navbar -->
      <header class="navbar navbar-expand-md d-print-none no-print">
        <div class="container-xl">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu">
            <span class="navbar-toggler-icon"></span>
          </button>
          <h1 class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
            <a href="./dashboard.html">
              Sistema de Evaluación Psicométrica
            </a>
          </h1>
          <div class="navbar-nav flex-row order-md-last">
            <!-- Dark/Light Mode Toggle -->
            <div class="nav-item dropdown d-none d-md-flex me-3">
              <a href="#" class="nav-link px-0" data-bs-toggle="dropdown" tabindex="-1" aria-label="Toggle theme">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon theme-toggle-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" />
                  <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" />
                </svg>
              </a>
              <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <a href="#" class="dropdown-item" data-bs-theme-value="light">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon dropdown-item-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" />
                    <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" />
                  </svg>
                  Modo Claro
                </a>
                <a href="#" class="dropdown-item" data-bs-theme-value="dark">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon dropdown-item-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
                  </svg>
                  Modo Oscuro
                </a>
                <a href="#" class="dropdown-item" data-bs-theme-value="auto">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon dropdown-item-icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <path d="M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z" />
                    <path d="M6 8h.01" />
                    <path d="M9 8h.01" />
                    <path d="M12 8h.01" />
                    <path d="M6 11h.01" />
                    <path d="M9 11h.01" />
                    <path d="M12 11h.01" />
                    <path d="M6 14h.01" />
                    <path d="M9 14h.01" />
                    <path d="M12 14h.01" />
                  </svg>
                  Automático
                </a>
              </div>
            </div>
            <div class="nav-item dropdown">
              <a href="#" class="nav-link d-flex lh-1 text-reset p-0" data-bs-toggle="dropdown">
                <span class="avatar avatar-sm" style="background-image: url(../Tabler/tabler-1.4.0/dashboard/dist/static/avatars/000m.jpg)"></span>
                <div class="d-none d-xl-block ps-2">
                  <div>Admin</div>
                  <div class="mt-1 small text-muted">Recursos Humanos</div>
                </div>
              </a>
              <div class="dropdown-menu dropdown-menu-end dropdown-menu-arrow">
                <a href="./configuracion.html" class="dropdown-item">Configuración</a>
                <div class="dropdown-divider"></div>
                <a href="login.html" class="dropdown-item">Cerrar sesión</a>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- Navigation -->
      <header class="navbar-expand-md no-print">
        <div class="collapse navbar-collapse" id="navbar-menu">
          <div class="navbar navbar-light">
            <div class="container-xl">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="dashboard.html">
                    <span class="nav-link-icon d-md-none d-lg-inline-block">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <polyline points="5 12 3 12 12 3 21 12 19 12" />
                        <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
                        <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
                      </svg>
                    </span>
                    <span class="nav-link-title">Dashboard</span>
                  </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="candidatos.html">
                    <span class="nav-link-icon d-md-none d-lg-inline-block">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <circle cx="9" cy="7" r="4" />
                        <path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                        <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                        <path d="M21 21v-2a4 4 0 0 0 -3 -3.87" />
                      </svg>
                    </span>
                    <span class="nav-link-title">Candidatos</span>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </header>
      <!-- Page Content -->
      <div class="page-wrapper">
        <div class="page-header d-print-none no-print">
          <div class="container-xl">
            <div class="row g-2 align-items-center">
              <div class="col">
                <div class="page-pretitle">Resultado de Evaluación</div>
                <h2 class="page-title" id="candidato-nombre">Candidato</h2>
              </div>
              <div class="col-auto ms-auto d-print-none">
                <div class="btn-list">
                  <a href="#" class="btn" onclick="window.print()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                      <path d="M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2" />
                      <path d="M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4" />
                      <rect x="7" y="13" width="10" height="8" rx="2" />
                    </svg>
                    Imprimir
                  </a>
                  <a href="#" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                      <path d="M14 3v4a1 1 0 0 0 1 1h4" />
                      <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" />
                      <line x1="12" y1="11" x2="12" y2="17" />
                      <polyline points="9 14 12 17 15 14" />
                    </svg>
                    Exportar PDF
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Main Content -->
        <div class="page-body">
          <div class="container-xl">
            <!-- Candidate Info Row -->
            <div class="row row-cards mb-3">
              <div class="col-12">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-2 text-center">
                        <span class="avatar avatar-xl" style="background-image: url(../Tabler/tabler-1.4.0/dashboard/dist/static/avatars/001m.jpg)"></span>
                      </div>
                      <div class="col-md-5">
                        <h3 class="mb-1" id="candidato-nombre-detalle">Candidato</h3>
                        <p class="text-muted mb-2" id="candidato-contacto">—</p>
                        <div class="mb-2">
                          <span class="badge bg-blue-lt me-1" id="candidato-puesto">Puesto: —</span>
                          <span class="badge bg-green-lt">Estado: Completado</span>
                        </div>
                        <small class="text-muted">
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                            <rect x="4" y="5" width="16" height="16" rx="2" />
                            <line x1="16" y1="3" x2="16" y2="7" />
                            <line x1="8" y1="3" x2="8" y2="7" />
                            <line x1="4" y1="11" x2="20" y2="11" />
                            <line x1="11" y1="15" x2="12" y2="15" />
                            <line x1="12" y1="15" x2="12" y2="18" />
                          </svg>
                          <span id="fecha-evaluacion">Fecha de evaluación: —</span>
                        </small>
                      </div>
                      <div class="col-md-5 text-center">
                        <div class="score-circle">
                          <div class="score-circle-inner">
                            <div class="score-value" id="puntaje-total">—</div>
                            <div class="score-max">de 122</div>
                            <div class="mt-2">
                              <span class="badge" id="porcentaje-badge">—%</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Recommendation Box -->
            <div class="row row-cards mb-3">
              <div class="col-12">
                <div class="recommendation-box recommendation-hire">
                  <h2 class="mb-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-lg text-green" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                      <circle cx="12" cy="12" r="9" />
                      <path d="M9 12l2 2l4 -4" />
                    </svg>
                    <span id="recomendacion-titulo">RECOMENDACIÓN: —</span>
                  </h2>
                  <p class="mb-0" id="recomendacion-descripcion">Análisis del perfil del candidato aparecerá aquí.</p>
                </div>
              </div>
            </div>
            
            <!-- Detailed Results -->
            <div class="row row-cards">
              <!-- DISC Profile -->
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Perfil DISC</h3>
                  </div>
                  <div class="card-body">
                    <div class="disc-chart">
                      <div class="disc-bar disc-bar-d" style="height: 10%" id="disc-d">
                        <span>—</span>
                        <span class="disc-label">D</span>
                      </div>
                      <div class="disc-bar disc-bar-i" style="height: 10%" id="disc-i">
                        <span>—</span>
                        <span class="disc-label">I</span>
                      </div>
                      <div class="disc-bar disc-bar-s" style="height: 10%" id="disc-s">
                        <span>—</span>
                        <span class="disc-label">S</span>
                      </div>
                      <div class="disc-bar disc-bar-c" style="height: 10%" id="disc-c">
                        <span>—</span>
                        <span class="disc-label">C</span>
                      </div>
                    </div>
                    <div class="mt-4">
                      <h4>Interpretación del Perfil:</h4>
                      <ul class="list-unstyled space-y-1">
                        <li id="interpretacion-d"><strong>Dominancia (D: —):</strong> Interpretación pendiente</li>
                        <li id="interpretacion-i"><strong>Influencia (I: —):</strong> Interpretación pendiente</li>
                        <li id="interpretacion-s"><strong>Estabilidad (S: —):</strong> Interpretación pendiente</li>
                        <li id="interpretacion-c"><strong>Cumplimiento (C: —):</strong> Interpretación pendiente</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Score Breakdown -->
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Desglose de Puntuación</h3>
                  </div>
                  <div class="card-body">
                    <div class="table-responsive">
                      <table class="table table-vcenter">
                        <thead>
                          <tr>
                            <th>Sección</th>
                            <th class="text-end">Puntaje</th>
                            <th class="text-end">Máximo</th>
                            <th class="text-end">%</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              <strong>CLEAVER/DISC</strong>
                              <div class="text-muted small">Perfil conductual</div>
                            </td>
                            <td class="text-end" id="cleaver-puntaje">—</td>
                            <td class="text-end">30</td>
                            <td class="text-end">
                              <span class="badge" id="cleaver-porcentaje">—%</span>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <strong>KOSTICK</strong>
                              <div class="text-muted small">Preferencias laborales</div>
                            </td>
                            <td class="text-end" id="kostick-puntaje">—</td>
                            <td class="text-end">37</td>
                            <td class="text-end">
                              <span class="badge" id="kostick-porcentaje">—%</span>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <strong>Situaciones Laborales</strong>
                              <div class="text-muted small">Ética y honestidad</div>
                            </td>
                            <td class="text-end" id="situaciones-puntaje">—</td>
                            <td class="text-end">25</td>
                            <td class="text-end">
                              <span class="badge" id="situaciones-porcentaje">—%</span>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <strong>Aptitudes Técnicas</strong>
                              <div class="text-muted small">Conocimientos y seguridad</div>
                            </td>
                            <td class="text-end" id="aptitudes-puntaje">—</td>
                            <td class="text-end">30</td>
                            <td class="text-end">
                              <span class="badge" id="aptitudes-porcentaje">—%</span>
                            </td>
                          </tr>
                          <tr class="table-active">
                            <td><strong>TOTAL</strong></td>
                            <td class="text-end"><strong id="total-puntaje">—</strong></td>
                            <td class="text-end"><strong>122</strong></td>
                            <td class="text-end">
                              <span class="badge" id="total-porcentaje">—%</span>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Critical Responses -->
            <div class="row row-cards mt-3">
              <div class="col-12">
                <div class="card">
                  <div class="card-header bg-danger text-white">
                    <h3 class="card-title mb-0">Análisis de Respuestas Críticas</h3>
                  </div>
                  <div class="card-body">
                    <div id="banderas-rojas-header">
                      <h4 class="mb-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                          <circle cx="12" cy="12" r="9" />
                          <path d="M9 12l2 2l4 -4" />
                        </svg>
                        <span id="banderas-rojas-titulo">Análisis de Respuestas Críticas</span>
                      </h4>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <h5>Situaciones Éticas</h5>
                        <ul class="list-unstyled">
                          <div id="situaciones-eticas-lista">
                            <p class="text-muted">Las respuestas a situaciones éticas aparecerán aquí.</p>
                          </div>
                        </ul>
                      </div>
                      <div class="col-md-6">
                        <h5>Preguntas KOSTICK Críticas</h5>
                        <ul class="list-unstyled">
                          <div id="kostick-criticas-lista">
                            <p class="text-muted">Las respuestas críticas de KOSTICK aparecerán aquí.</p>
                          </div>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Strengths and Areas for Improvement -->
            <div class="row row-cards mt-3">
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header bg-green-lt">
                    <h3 class="card-title">Fortalezas Identificadas</h3>
                  </div>
                  <div class="card-body">
                    <ul class="list-unstyled space-y-2">
                      <div id="fortalezas-lista">
                        <p class="text-muted">Las fortalezas identificadas aparecerán aquí.</p>
                      </div>
                    </ul>
                  </div>
                </div>
              </div>
              
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header bg-yellow-lt">
                    <h3 class="card-title">Áreas de Mejora</h3>
                  </div>
                  <div class="card-body">
                    <ul class="list-unstyled space-y-2">
                      <div id="areas-mejora-lista">
                        <p class="text-muted">Las áreas de mejora aparecerán aquí.</p>
                      </div>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Final Observations -->
            <div class="row row-cards mt-3">
              <div class="col-12">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Observaciones Finales</h3>
                  </div>
                  <div class="card-body">
                    <div id="observaciones-contenido">
                      <p class="text-muted">Las observaciones finales aparecerán aquí una vez completada la evaluación.</p>
                    </div>
                  </div>
                  <div class="card-footer">
                    <div class="row align-items-center">
                      <div class="col">
                        <div class="text-muted">
                          <span id="sistema-procesamiento">Sistema Automatizado v2.0</span>
                        </div>
                      </div>
                      <div class="col-auto">
                        <div class="text-muted">
                          <span id="fecha-procesamiento">Fecha de procesamiento: —</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Footer -->
        <footer class="footer footer-transparent d-print-none no-print">
          <div class="container-xl">
            <div class="row text-center align-items-center flex-row-reverse">
              <div class="col-lg-auto ms-lg-auto">
                <ul class="list-inline list-inline-dots mb-0">
                  <li class="list-inline-item"><a href="#" class="link-secondary">Documentación</a></li>
                  <li class="list-inline-item"><a href="#" class="link-secondary">Soporte</a></li>
                </ul>
              </div>
              <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                <ul class="list-inline list-inline-dots mb-0">
                  <li class="list-inline-item">
                    © 2025 Sistema de Evaluación Psicométrica
                  </li>
                  <li class="list-inline-item">
                    v2.0
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
    <!-- Scripts -->
    <script src="../Tabler/tabler-1.4.0/dashboard/dist/libs/apexcharts/dist/apexcharts.min.js" defer></script>
    <script src="../Tabler/tabler-1.4.0/dashboard/dist/js/tabler.min.js" defer></script>
    <script>
      // Data loading and population functions
      document.addEventListener('DOMContentLoaded', function() {
        // Initialize empty state
        showEmptyState();

        // Load real data if URL params are present
        const urlParams = new URLSearchParams(window.location.search);
        const candidatoId = urlParams.get('id');

        if (candidatoId) {
          loadCandidateResults(candidatoId);
        }
      });

      function showEmptyState() {
        // Set default recommendation box class
        const recomendacionBox = document.querySelector('.recommendation-box');
        if (recomendacionBox) {
          recomendacionBox.className = 'recommendation-box';
        }

        // Set default badge colors
        const badges = document.querySelectorAll('[id$="-porcentaje"], #porcentaje-badge, #total-porcentaje');
        badges.forEach(badge => {
          badge.className = 'badge bg-secondary';
        });
      }

      async function loadCandidateResults(candidatoId) {
        try {
          // TODO: Replace with actual API endpoint
          console.log('Loading results for candidate:', candidatoId);

          // Example of how real data would be populated:
          // const response = await fetch(`/api/candidatos/${candidatoId}/resultado`);
          // const data = await response.json();
          // populateResults(data);

        } catch (error) {
          console.error('Error loading candidate results:', error);
        }
      }

      function populateResults(data) {
        // Example function for populating real data
        // This would be called when real API data is available

        // Basic info
        document.getElementById('candidato-nombre').textContent = data.nombre || '—';
        document.getElementById('candidato-nombre-detalle').textContent = data.nombre || '—';
        document.getElementById('candidato-contacto').textContent = data.email || '—';
        document.getElementById('candidato-puesto').textContent = `Puesto: ${data.puesto || '—'}`;

        // Scores
        document.getElementById('puntaje-total').textContent = data.puntajeTotal || '—';
        document.getElementById('porcentaje-badge').textContent = `${data.porcentaje || '—'}%`;

        // Update score circle
        if (data.porcentaje !== undefined) {
          updateScoreCircle(data.porcentaje, data.esNoContratable);
        }

        // Set recommendation
        if (data.recomendacion) {
          setRecommendation(data.recomendacion, data.recomendacionTexto);
        }

        // DISC Profile
        if (data.perfilDISC) {
          populateDISCProfile(data.perfilDISC);
        }

        // Score breakdown
        if (data.desglosePuntuacion) {
          populateScoreBreakdown(data.desglosePuntuacion);
        }

        // Critical responses
        if (data.banderasRojas !== undefined) {
          populateCriticalResponses(data.banderasRojas, data.respuestasCriticas);
        }

        // Strengths and improvements
        if (data.fortalezas) {
          populateStrengths(data.fortalezas);
        }
        if (data.areasMejora) {
          populateImprovements(data.areasMejora);
        }

        // Final observations
        if (data.observaciones) {
          document.getElementById('observaciones-contenido').innerHTML = data.observaciones;
        }

        // Timestamps
        if (data.fechaEvaluacion) {
          document.getElementById('fecha-evaluacion').textContent = `Evaluación completada: ${data.fechaEvaluacion}`;
        }
        if (data.fechaProcesamiento) {
          document.getElementById('fecha-procesamiento').textContent = `Fecha de procesamiento: ${data.fechaProcesamiento}`;
        }
      }

      function setRecommendation(tipo, texto) {
        const titulo = document.getElementById('recomendacion-titulo');
        const descripcion = document.getElementById('recomendacion-descripcion');
        const box = document.querySelector('.recommendation-box');

        titulo.textContent = `RECOMENDACIÓN: ${tipo.toUpperCase()}`;
        descripcion.textContent = texto;

        // Set appropriate CSS class based on recommendation
        box.className = 'recommendation-box';
        if (tipo.toLowerCase().includes('contratar')) {
          box.classList.add('recommendation-hire');
        } else if (tipo.toLowerCase().includes('revisar')) {
          box.classList.add('recommendation-review');
        } else if (tipo.toLowerCase().includes('rechazar')) {
          box.classList.add('recommendation-reject');
        }
      }

      function populateDISCProfile(perfil) {
        // Update DISC bars and values
        ['d', 'i', 's', 'c'].forEach(letra => {
          const valor = perfil[letra] || 0;
          const altura = Math.max(10, (valor / 10) * 100); // Min 10% height

          const bar = document.getElementById(`disc-${letra}`);
          if (bar) {
            bar.style.height = `${altura}%`;
            bar.querySelector('span').textContent = valor;
          }

          // Update interpretations
          const interpretacion = document.getElementById(`interpretacion-${letra}`);
          if (interpretacion && perfil.interpretaciones && perfil.interpretaciones[letra]) {
            interpretacion.innerHTML = `<strong>${perfil.interpretaciones[letra].titulo}:</strong> ${perfil.interpretaciones[letra].descripcion}`;
          }
        });
      }

      function populateScoreBreakdown(desglose) {
        const secciones = ['cleaver', 'kostick', 'situaciones', 'aptitudes', 'total'];

        secciones.forEach(seccion => {
          if (desglose[seccion]) {
            const puntaje = document.getElementById(`${seccion}-puntaje`);
            const porcentaje = document.getElementById(`${seccion}-porcentaje`);

            if (puntaje) puntaje.textContent = desglose[seccion].puntaje;
            if (porcentaje) {
              porcentaje.textContent = `${desglose[seccion].porcentaje}%`;

              // Set badge color based on percentage
              const pct = desglose[seccion].porcentaje;
              porcentaje.className = 'badge ';
              if (pct >= 80) porcentaje.className += 'bg-green';
              else if (pct >= 65) porcentaje.className += 'bg-yellow';
              else porcentaje.className += 'bg-red';
            }
          }
        });
      }

      function populateCriticalResponses(tieneBanderas, respuestas) {
        const header = document.getElementById('banderas-rojas-header');
        const titulo = document.getElementById('banderas-rojas-titulo');

        if (tieneBanderas) {
          titulo.textContent = 'Banderas Rojas Detectadas';
          header.querySelector('.icon').className = 'icon text-red';
        } else {
          titulo.textContent = 'Sin Banderas Rojas Detectadas';
          header.querySelector('.icon').className = 'icon text-green';
        }

        // Populate situaciones éticas
        if (respuestas && respuestas.situaciones) {
          const lista = document.getElementById('situaciones-eticas-lista');
          lista.innerHTML = respuestas.situaciones.map(situacion =>
            `<li class="mb-2">
              <svg class="icon ${situacion.correcta ? 'text-green' : 'text-red'} icon-inline" width="24" height="24">
                <path d="${situacion.correcta ? 'M5 12l5 5l10 -10' : 'M18 6L6 18M6 6l12 12'}"/>
              </svg>
              <strong>${situacion.nombre}:</strong> ${situacion.descripcion}
            </li>`
          ).join('');
        }

        // Populate KOSTICK críticas
        if (respuestas && respuestas.kostick) {
          const lista = document.getElementById('kostick-criticas-lista');
          lista.innerHTML = respuestas.kostick.map(pregunta =>
            `<li class="mb-2">
              <svg class="icon ${pregunta.correcta ? 'text-green' : 'text-red'} icon-inline" width="24" height="24">
                <path d="${pregunta.correcta ? 'M5 12l5 5l10 -10' : 'M18 6L6 18M6 6l12 12'}"/>
              </svg>
              <strong>${pregunta.nombre}:</strong> ${pregunta.descripcion}
            </li>`
          ).join('');
        }
      }

      function populateStrengths(fortalezas) {
        const lista = document.getElementById('fortalezas-lista');
        lista.innerHTML = fortalezas.map(fortaleza =>
          `<li>
            <svg class="icon text-green icon-inline" width="24" height="24">
              <path d="M5 12l5 5l10 -10"/>
            </svg>
            ${fortaleza}
          </li>`
        ).join('');
      }

      function populateImprovements(areas) {
        const lista = document.getElementById('areas-mejora-lista');
        lista.innerHTML = areas.map(area =>
          `<li>
            <svg class="icon text-yellow icon-inline" width="24" height="24">
              <path d="M12 9v2m0 4v.01M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75"/>
            </svg>
            ${area}
          </li>`
        ).join('');
      }

      function updateScoreCircle(porcentaje, esNoContratable = false) {
        const circle = document.querySelector('.score-circle');
        if (!circle || porcentaje === undefined) return;

        // Special handling for non-hirable candidates
        if (esNoContratable) {
          // Show full red circle for non-hirable candidates
          circle.style.background = `conic-gradient(
            from 0deg,
            #dc2626 0deg,
            #dc2626 360deg
          )`;

          // Update badge to show rejection
          const badge = document.getElementById('porcentaje-badge');
          if (badge) {
            badge.className = 'badge bg-red';
            badge.textContent = 'NO CONTRATABLE';
          }
          return;
        }

        // Convert percentage to degrees (360 degrees = 100%)
        const degrees = Math.min(360, Math.max(0, (porcentaje / 100) * 360));

        // Choose color based on score
        let color = '#e5e7eb'; // Gray for no score
        if (porcentaje >= 80) {
          color = '#10b981'; // Green for high score
        } else if (porcentaje >= 65) {
          color = '#fbbf24'; // Yellow for medium score
        } else if (porcentaje >= 50) {
          color = '#f59e0b'; // Orange for low-medium score
        } else if (porcentaje > 0) {
          color = '#ef4444'; // Red for low score
        }

        // Update the conic gradient
        if (degrees > 0) {
          circle.style.background = `conic-gradient(
            from 0deg,
            ${color} 0deg,
            ${color} ${degrees}deg,
            #e5e7eb ${degrees}deg
          )`;
        } else {
          // No score - show empty circle
          circle.style.background = `conic-gradient(
            from 0deg,
            #e5e7eb 0deg,
            #e5e7eb 360deg
          )`;
        }

        // Update badge color
        const badge = document.getElementById('porcentaje-badge');
        if (badge) {
          badge.className = 'badge ';
          if (porcentaje >= 80) badge.className += 'bg-green';
          else if (porcentaje >= 65) badge.className += 'bg-yellow';
          else if (porcentaje >= 50) badge.className += 'bg-orange';
          else if (porcentaje > 0) badge.className += 'bg-red';
          else badge.className += 'bg-secondary';
        }
      }
    </script>
  </body>
</html>